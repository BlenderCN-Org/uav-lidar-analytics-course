<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>GIS595/MEA792: UAV/lidar Data Analytics</title>

<link rel="shortcut icon" href=".././img/favicon.ico" />

<link href="../layout.css" rel="stylesheet" type="text/css" media="screen">
<link href="../style.css" rel="stylesheet" type="text/css" media="screen">

</head>

<body>

<div id="outercontainer">
<div id="container">

<header>
<div id="header-image">
    <h1>GIS595/MEA792:<br>UAV/lidar Data Analytics</h1>
</div>

<nav>
<ul class="nav">
<li><a href="../index.html">Syllabus</a></li>
<li><a href="../schedule.html">Schedule</a></li>
<li><a href="../lectures.html">Lectures</a></li>
<li><a href="../assignments.html">Assignments</a></li>
<li><a href="../projects.html">Projects</a></li>
</ul>
</nav>

</header>

<main>
<!-- This is a generated file. Do not edit. -->
<h2>GIS based analysis of UAS derived data processing outputs</h2>

<p>This assignment requires critical thinking about the processing outputs. <br>In the scope of your project (previously stated research problem) run the necessary analysis in GIS software. 
<ul>
<li>You can use the timeseries of data from the GRASS location if your project includes changes in terrain in time. 
<li>There are also orthophotomaps and point clouds available from all the flights (dates in DSM file names). If you need any of them – please request the specific file and format. Note that especially orthophotos are quite large files – up to couple GB.
</ul>
<br>
If you want to use data from your research – I strongly encourage you to do so and share the results with others!
<br>
<br>
<strong> In the report include:</strong> 
<ul>
	<li>Your research problem/research question
	<li>Steps and procedures the you've performed in order to answer this question
	<li>Obstacles and problems you’ve encountered
</ul>
Asses the relevance of UAV derived data and processing outputs for solving your research problem. <br><br>
<strong>You will present your results in front of the class. </strong> <br></p> <br><br>
Some additional issues worth investigating:
<ul>
	<li>Including GCPs in geoprocessing improves the results. Does it have an effect on phenomenon that you are investigating?
	<li>Agisoft is only one of the software solutions available for the UAV data processing. In the GRASS location there are available DSM generated in different environments: opendronemap, Pix4D and Trimble Business Center (just for one example flight). If it is relevant to your research scope, you can include comparison of this results.
	<li>In <a href="http://ncsu-osgeorel.github.io/uav-lidar-analytics-course/assignments/geoprocessing.html">Assignment 3</a> you’ve used arbitrary given parameter values in each processing step. You can change various modes, quality, values and options and investigate if it does improve the results for investigation of your chosen phenomenon. You can find descriptions of the options for each processing step on <a href="http://ncsu-osgeorel.github.io/uav-lidar-analytics-course/lectures/04_Imagery_Processing.html#/">lecture slides </a> and in the <a href="http://www.agisoft.com/pdf/photoscan-pro_1_1_en.pdf"> Agisoft Manual</a>
</ul>
<h4>DSMs comparison - influence of GCPs</h4>
<p>In order to detect the bowl effect, additional DSM needs to be computed. This time GCPs shuld not be used in the processing. You can repeat all the steps from Assgment 3 - part for quality processing. Batch processing commands should be in this order:
<ol>
	<li>Align Photos</li>
	<li>Optimize Alignment (this is only based on camera coordinates)</li>
	<li>Build Dense Point cloud (quality:medium)</li>
	<li>Build Mesh (face count 50 000 000)</li>
	<li>Decimate Mesh (face count: 1 000 000)</li>
	<li>Build Texture</li>
	<li>Export DEM</li>
</ol>
Then calculate the differences in elevation in the DSM generated with GCP and the new one without GCPs
<pre><code>r.mapcalc expression="GCP-noGCP" = sample_DSM@PERMANENT - sample_DSM_noGCPs@PERMANENT
</code></pre>
Change the color map to better see the differences (for me it worked the best entering the values directly: 
<pre><code>35 blue
36 white
37 red
</code></pre>
</p>
<p>
Generating new DSM can take up to 1h. In the meantime you can compare DSMs from the last flight. DSM generated without GCPs is provided in the google location.<br>
For the floght from 2015-06-20 there are DSM with GCPs generated in 3 different software environments (Trimble Business Center, Agisoft Photoscan and Pix4D). Additionally there are DSMs generated without GCPs in Agisoft Photoscan and Pix4D.<br>
Check the bowl effect for the Agisoft generated products
<pre><code>r.mapcalc expression="agi_GCP-agi_noGCP" = 2015_06_20_DSM_agi_11GCP@PERMANENT - 2015_06_20_DSM_agi_noGCP@PERMANENT  
</code></pre>
change the color map to better see the differences<br>
Check the bowl effect for the Pix4D generated products
<pre><code>r.mapcalc expression="p4d_GCP-p4d_noGCP" = 2015_06_20_pix4d_11GCP_dsm@PERMANENT - 2015_06_20_DSM_pix4d_NoGCP@PERMANENT 
</code></pre>
<br>Which software generates larger bowl effect?<br>
<h4>Compare DSMs (with GCPs) generated by different softwares</h4>
<pre><code>r.mapcalc expression="agi-trimble" = 2015_06_20_DSM_agi_11GCP@PERMANENT - 2015_06_20_DSM_Trimble_11GCP@PERMANENT
r.mapcalc expression="p4d-agi" = 2015_06_20_pix4d_11GCP_dsm@PERMANENT - 2015_06_20_DSM_agi_11GCP@PERMANENTr.mapcalc expression="p4d-trimble" = 2015_06_20_pix4d_11GCP_dsm@PERMANENT - 2015_06_20_DSM_Trimble_11GCP@PERMANENT
</code></pre>
apply the color table that varies from -1m to 1m to visualize results of the comparison
<pre><code>r.colors  
</code></pre>
in the Define tab, type the rules in the 'enter values directly' option
<pre><code>-1 blue
0 white
1 red  
</code></pre>

Compare the maps? How do they relate to each other. What patterns (artifacts) can you recognize?
</p>
<h4>Terrain analysis</h4>
<p>It is also useful to a perform terrain analysis using different tools to see the differences even more clearly.<br>
Run the <i>r.slope.aspect</i> and <i>r.relief</i> command for chosen DSMs.<br>
example:
<pre><code>r.slope.aspect elevation=sample_DSM@PERMANENT slope=sample_DSM_slope aspect=sample_DSM_aspect pcurvature=sample_DSM_curv
r.relief input=sample_DSM@PERMANENT output=sample_DSM_relief
r.slope.aspect elevation=sample_DSM_noGCP@PERMANENT slope=sample_DSM_noGCP_slope aspect=sample_DSM_noGCP_aspect pcurvature=sample_DSM_noGCP_curv
r.relief input=sample_DSM@PERMANENT output=sample_DSM_noGCP_relief
</code></pre>





























</main>

<footer>

<nav>
<ul>
<li>
    <a href="https://github.com/ncsu-osgeorel/uav-lidar-analytics-course" title="Fork on GitHub">
        <img src="../img/github_logo.png" alt="GitHub Octocat logo">
    </a>
</li>
<li title="Copyright and license">
    &copy; 2015
    <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a>
    <a href="http://geospatial.ncsu.edu/osgeorel/">NCSU OSGeoREL</a>
</li>
</ul>
</nav>

</footer>

</div>
</div>

</body>
</html>
